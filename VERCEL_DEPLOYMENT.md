# Деплой на Vercel

## Важные замечания

### База данных (SQLite)

⚠️ **ВНИМАНИЕ**: `better-sqlite3` использует файловую систему, которая на Vercel serverless функциях доступна только для чтения (кроме `/tmp`).

**Текущая реализация:**
- На Vercel БД автоматически использует `/tmp/database.db`
- Данные в `/tmp` **не сохраняются** между запросами (каждая serverless функция имеет свой изолированный `/tmp`)
- Для production рекомендуется использовать **Vercel Postgres** или другую облачную БД

**Рекомендации:**
1. Для production используйте Vercel Postgres или другой облачный сервис БД
2. Текущая реализация подходит только для разработки/тестирования

## Переменные окружения

Настройте следующие переменные в Vercel Dashboard:

### Обязательные:
- `NEXTAUTH_SECRET` - секретный ключ для NextAuth (сгенерируйте случайную строку)
- `NEXTAUTH_URL` - URL вашего приложения (например, `https://your-app.vercel.app`)

### Опциональные:
- `DATABASE_PATH` - путь к файлу БД (по умолчанию используется `/tmp/database.db` на Vercel)
- `NODE_ENV` - окружение (`production` для production)

## Команды сборки

Vercel автоматически определит Next.js проект и использует:
- Build Command: `npm run build`
- Output Directory: `.next`
- Install Command: `npm install`

## Ограничения Vercel

- Максимальное время выполнения функции: 30 секунд (настроено в `vercel.json`)
- Файловая система: read-only (кроме `/tmp`)
- Память: ограничена для serverless функций

## Миграции БД

Для инициализации БД на Vercel:
1. Используйте API endpoint для создания таблиц при первом запросе
2. Или используйте Vercel Postgres и миграции через Drizzle

